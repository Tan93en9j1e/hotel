<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ¨ é…’åº—æ¥å¾…ç®¡ç†ç³»ç»Ÿ</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

    <!-- è‡ªå®šä¹‰æ ·å¼ -->
    <style>
        :root {
            --primary-dark: #343a40;
            --primary-light: #f8f9fa;
            --accent-blue: #0d6efd;
        }

        body {
            background-color: #f5f7fb;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        .navbar-brand {
            font-weight: 700;
            color: white !important;
        }

        .card {
            border: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-radius: 12px;
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
        }

        .btn-primary {
            background-color: var(--accent-blue);
            border-color: var(--accent-blue);
        }

        .btn-outline-primary:hover {
            background-color: var(--accent-blue);
            color: white;
        }

        .table th {
            background-color: #f1f5f9;
            font-weight: 600;
        }

        .action-btn {
            margin: 0 4px;
            opacity: 0.9;
            transition: opacity 0.2s;
        }

        .action-btn:hover {
            opacity: 1;
        }

        footer {
            margin-top: 40px;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-dark bg-dark py-2">
    <div class="container">
        <a class="navbar-brand" href="/groups"><i class="fas fa-arrow-left me-2"></i>è¿”å›åˆ—è¡¨</a>
    </div>
</nav>

<div class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="fas fa-users me-2 text-primary"></i>æ–°å¢å›¢ä½“å…¥ä½</h2>
    </div>

    <form method="post" id="groupForm">
        <!-- å›¢ä½“ä¿¡æ¯å¡ç‰‡ -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <i class="fas fa-info-circle me-2"></i>å›¢ä½“åŸºæœ¬ä¿¡æ¯
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">å›¢ä½“åç§° *</label>
                        <input type="text" name="groupName" class="form-control" required />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">è”ç³»äºº *</label>
                        <input type="text" name="contactPerson" class="form-control" required />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">è”ç³»ç”µè¯</label>
                        <input type="text" name="contactPhone" class="form-control" placeholder="å¯é€‰" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">ä½åº—äº‹ç”±</label>
                        <input type="text" name="purpose" class="form-control" placeholder="å¦‚ï¼šå•†åŠ¡è€ƒå¯Ÿ" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">é¢„å®šç¦»åº—æ—¥æœŸ</label>
                        <input type="date" name="expectedCheckOutDate" class="form-control" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">ä¸»æˆ¿é—´å·ï¼ˆå¦‚å›¢é•¿æˆ¿ï¼‰</label>
                        <input type="text" name="mainRoomNumber" class="form-control" placeholder="ä¾‹ï¼š301" />
                    </div>
                </div>
            </div>
        </div>

        <!-- æˆå‘˜ä¿¡æ¯ -->
        <div class="card">
            <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                <span><i class="fas fa-user-friends me-2"></i>æˆå‘˜ä¿¡æ¯ï¼ˆè‡³å°‘å¡«å†™å§“åï¼‰</span>
                <button type="button" class="btn btn-light btn-sm" onclick="addMember()">
                    <i class="fas fa-plus me-1"></i>æ·»åŠ æˆå‘˜
                </button>
            </div>
            <div class="card-body">
                <div id="members">
                    <!-- åˆå§‹5è¡Œ -->
                    <div class="member-row mb-3 p-3 border rounded bg-light" th:each="i : ${#numbers.sequence(0, 4)}">
                        <div class="row g-2 align-items-end">
                            <div class="col-md-2">
                                <input type="text" name="memberName[]" class="form-control" placeholder="å§“å *" required />
                            </div>
                            <div class="col-md-2">
                                <select name="memberGender[]" class="form-select">
                                    <option value="">æ€§åˆ«</option>
                                    <option value="ç”·">ç”·</option>
                                    <option value="å¥³">å¥³</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <input type="text" th:name="'memberHometown['+${i}+']'" class="form-control" placeholder="ç±è´¯" />
                            </div>
                            <div class="col-md-2">
                                <input type="text" th:name="'memberWorkUnit['+${i}+']'" class="form-control" placeholder="å•ä½" />
                            </div>
                            <div class="col-md-2">
                                <input type="text" th:name="'memberOccupation['+${i}+']'" class="form-control" placeholder="èŒä¸š" />
                            </div>
                            <div class="col-md-2">
                                <button type="button" class="btn btn-outline-danger btn-sm w-100" onclick="removeMember(this)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-flex gap-2 mt-4">
            <button type="submit" class="btn btn-success px-4">
                <i class="fas fa-save me-2"></i>æäº¤å›¢ä½“
            </button>
            <a href="/groups" class="btn btn-secondary">å–æ¶ˆ</a>
        </div>
    </form>
</div>

<script>
    let memberIndex = 5;

    function addMember() {
        const container = document.getElementById('members');
        const row = document.createElement('div');
        row.className = 'member-row mb-3 p-3 border rounded bg-light';
        row.innerHTML = `
        <div class="row g-2 align-items-end">
          <div class="col-md-2">
            <input type="text" name="memberName[]" class="form-control" placeholder="å§“å *" required />
          </div>
          <div class="col-md-2">
            <select name="memberGender[]" class="form-select">
              <option value="">æ€§åˆ«</option>
              <option value="ç”·">ç”·</option>
              <option value="å¥³">å¥³</option>
            </select>
          </div>
          <div class="col-md-2">
            <input type="text" name="memberHometown[${memberIndex}]" class="form-control" placeholder="ç±è´¯" />
          </div>
          <div class="col-md-2">
            <input type="text" name="memberWorkUnit[${memberIndex}]" class="form-control" placeholder="å•ä½" />
          </div>
          <div class="col-md-2">
            <input type="text" name="memberOccupation[${memberIndex}]" class="form-control" placeholder="èŒä¸š" />
          </div>
          <div class="col-md-2">
            <button type="button" class="btn btn-outline-danger btn-sm w-100" onclick="removeMember(this)">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>`;
        container.appendChild(row);
        memberIndex++;
    }

    function removeMember(btn) {
        const rows = document.querySelectorAll('.member-row');
        if (rows.length > 1) {
            btn.closest('.member-row').remove();
        } else {
            alert('âš ï¸ è‡³å°‘éœ€è¦ä¿ç•™ä¸€ä½æˆå‘˜ï¼');
        }
    }
</script>
</body>
</html>